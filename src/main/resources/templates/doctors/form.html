<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/base}">
<head>
    <title th:text="${doctor.id} ? 'Editar Doctor' : 'Nuevo Doctor'"></title>
</head>
<body>
    <!-- Breadcrumb -->
    <div layout:fragment="breadcrumb">
        <li>
            <div class="flex items-center">
                <i class="fas fa-chevron-right text-gray-400 mr-2"></i>
                <a href="/doctors" class="text-sm font-medium text-gray-500 hover:text-gray-700">Doctores</a>
            </div>
        </li>
        <li>
            <div class="flex items-center">
                <i class="fas fa-chevron-right text-gray-400 mr-2"></i>
                <span class="text-sm font-medium text-gray-500" 
                      th:text="${doctor.id} ? 'Editar Doctor' : 'Nuevo Doctor'">Nuevo Doctor</span>
            </div>
        </li>
    </div>

    <!-- Page Header -->
    <div layout:fragment="page-header">
        <div class="flex justify-between items-center">
            <h1 class="text-3xl font-bold text-gray-900">
                <i class="fas fa-user-md mr-3 text-blue-600"></i>
                <span th:text="${doctor.id} ? 'Editar Doctor' : 'Nuevo Doctor'">Nuevo Doctor</span>
            </h1>
        </div>
    </div>

    <div layout:fragment="content">
        <div class="bg-white shadow rounded-lg">
            <div class="p-6">
                    <!-- Mostrar mensajes de error si existen -->
                    <div th:if="${error}" class="bg-red-50 border-l-4 border-red-400 p-4 mb-6">
                        <div class="flex">
                            <div class="flex-shrink-0">
                                <i class="fas fa-exclamation-circle text-red-400"></i>
                            </div>
                            <div class="ml-3">
                                <p class="text-sm text-red-700" th:text="${error}"></p>
                            </div>
                        </div>
                    </div>

                    <form th:action="${doctor.id} ? @{/doctors/{id}(id=${doctor.id})} : @{/doctors}" 
                          th:object="${doctor}" method="post" class="space-y-6">                    <!-- Información Personal -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="firstName" class="block text-sm font-medium text-gray-700">Nombre</label>
                            <input type="text" id="firstName" th:field="*{firstName}" required
                                   class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                            <div class="text-red-500 text-xs mt-1" th:if="${#fields.hasErrors('firstName')}" th:errors="*{firstName}"></div>
                        </div>
                        
                        <div>
                            <label for="lastName" class="block text-sm font-medium text-gray-700">Apellido</label>
                            <input type="text" id="lastName" th:field="*{lastName}" required
                                   class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                            <div class="text-red-500 text-xs mt-1" th:if="${#fields.hasErrors('lastName')}" th:errors="*{lastName}"></div>
                        </div>
                    </div>
                    
                    <!-- Información Profesional -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="licenseNumber" class="block text-sm font-medium text-gray-700">Número de Licencia</label>
                            <input type="text" id="licenseNumber" th:field="*{licenseNumber}" required
                                   class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                            <div class="text-red-500 text-xs mt-1" th:if="${#fields.hasErrors('licenseNumber')}" th:errors="*{licenseNumber}"></div>
                        </div>
                        
                        <div>
                            <label for="specialization" class="block text-sm font-medium text-gray-700">Especialización</label>
                            <input type="text" id="specialization" th:field="*{specialization}" required
                                   class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                            <div class="text-red-500 text-xs mt-1" th:if="${#fields.hasErrors('specialization')}" th:errors="*{specialization}"></div>
                        </div>
                    </div>
                    
                    <!-- Información de Contacto -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="email" class="block text-sm font-medium text-gray-700">Email</label>
                            <input type="email" id="email" th:field="*{email}" required
                                   class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                            <div class="text-red-500 text-xs mt-1" th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></div>
                        </div>
                        
                        <div>
                            <label for="phone" class="block text-sm font-medium text-gray-700">Teléfono</label>
                            <input type="tel" id="phone" th:field="*{phone}"
                                   class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                            <div class="text-red-500 text-xs mt-1" th:if="${#fields.hasErrors('phone')}" th:errors="*{phone}"></div>
                        </div>
                    </div>
                    
                    <!-- Horario de Trabajo -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Horario de Trabajo</label>
                        <div class="grid grid-cols-2 gap-4">
                            <div th:each="day : ${T(java.time.DayOfWeek).values()}" class="flex items-center space-x-2">
                                <input type="checkbox" th:id="${'workday-' + day}" th:name="${'workingHours[' + day + '].enabled'}"
                                       class="rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50">
                                <label th:for="${'workday-' + day}" class="text-sm text-gray-600" 
                                       th:text="${#strings.toLowerCase(day)}">día</label>
                                <div class="flex space-x-2">
                                    <input type="time" th:name="${'workingHours[' + day + '].start'}"
                                           class="block w-24 border border-gray-300 rounded-md shadow-sm py-1 px-2 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                    <input type="time" th:name="${'workingHours[' + day + '].end'}"
                                           class="block w-24 border border-gray-300 rounded-md shadow-sm py-1 px-2 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Botones -->
                    <div class="flex justify-end space-x-3">
                        <a href="/doctors" class="bg-gray-100 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2">
                            Cancelar
                        </a>
                        <button type="submit" 
                                class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                            Guardar
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</body>
</html>
